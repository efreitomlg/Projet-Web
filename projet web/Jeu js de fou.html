<!doctype html>
<html>

<head>
<meta charset="utf-8">
<title>LBEM - Jeu JS de fou</title>
<link href="style.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="common.js"></script>
</head>



<body id="snake" onscroll="scrollTitleManagement()" onload="displayManagement()">

    <header>
        <div id="titre_principal">
            <div id="logo">

                <h1 id="LBEM">La Baraque des Enfants Maudits</h1>
                <ul id="menu-deroulant">
                    <li><a href="accueil.html">Accueil</a></li>
                    <li><a href="#">Guild Wars</a>
                        <ul>
                            <li><a href="gw1.html">Guild Wars 1</a></li>
                            <li><a href="gw2.html">Guild Wars 2</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Monster Hunter</a>
                         <ul>
                            <li><a href="Monster Hunter Tri.html">Monster Hunter Tri</a></li>
                            <li><a href="Monster Hunter World.html">Monster Hunter World</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Hotline Miami</a>
                         <ul>
                            <li><a href="hotline miami.html">Hotline Miami 1</a></li>
                            <li><a href="hotline miami 2.html">Hotline Miami 2</a></li>
                        </ul>
                    </li>
                    <li><a href="Jeu js de fou.html">Jeu JS de fou</a></li>
                </ul>
            </div>
        
            <img src="images/logo.png" alt="Logo de LBEM" height="150" width="200" />
            
        </div>
    </header>

    <table class="jeux" width="80%"  border="0" cellspacing="3" cellpadding="1" >
  <tr>
    <td class="jeux" width="37%" height="98"></td>
    <td class="jeux" width="24%" ><script language="javascript" src="scripts/graphiques.js"></script>
<script language="javascript" src="scripts/serpent.js"></script></td>
    <td class="jeux" width="33%">&nbsp;</td>
  </tr>
</table>
</body>


<footer>
    <h3 id="footerLBEM">La Baraque des Enfants Maudits</h3>
    <table id="social">
        <tr>
            <td> <a href='https://www.facebook.com/Efrei/'><img src='Footer/facebook.png' height="30" /></a></td>
            <td> <a href='https://twitter.com/Efrei_Paris?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor'><img src='Footer/twitter.png' height="30" /></a></td>
            <td> <a href='https://www.instagram.com/efrei_paris/?hl=fr'><img src='Footer/insta.png' height="30" /></a></td>
            <td> <a href='https://www.linkedin.com/school/efrei-paris/'><img src='Footer/linkedin.png' height="30" /></a></td>
        </tr>
    </table>

    <table id="tablefooter">
        <tr>
            <td><a href='https://www.efrei.fr/'>Qui sommes-nous?</a></td>
            <td><p>Crédits</p></td>
            <td><p>Images trouvées sur internet</p></td>
            <td><a href="#">Haut de page</a></td>
        </tr>
    </table>
</footer>
    
</html>

<script type="text/javascript">
    function scrollTitleManagement(){

        var logo = document.getElementById('logo');
        if(window.scrollY > 0){
            logo.style.opacity = 0.5;
        }
        else{
            logo.style.opacity = 1;
        }
    }

    function displayManagement(){
        playlistDisplay();
    }

    function playlistDisplay(){

        var playlistTable = document.getElementById("playlist");
        var audioFiles = document.getElementById("audio_files").children;

        for(var i = 0; i < audioFiles.length; i++){
            var row = document.createElement("tr");

            var songnb = document.createElement("td");
            var name = document.createElement("td");
            var playtd = document.createElement("td");
            
            songnb.textContent = i+1;
            name.textContent = audioFiles[i].id;

            var play = document.createElement("button"); 
            play.id = i;
            play.textContent = i;
            play.type = "button";
            play.addEventListener("click", playMusic);
            play.classList.add("playBtn");
            playtd.appendChild(play);

            row.append(songnb);
            row.append(name);
            row.append(playtd);
            playlistTable.append(row);
        }
    }

    function playMusic(e){
        
        audioFileToPlay = parseInt(e.target.id);
        audioFiles = document.getElementById("audio_files").children;

        songname = document.getElementById("song_name");
        artist_name = document.getElementById("artist_name");

        for(var i = 0; i < audioFiles.length; i++){
            audioFiles[i].pause();
            audioFiles[i].currentTime = 0;
        }

        audioFiles[audioFileToPlay].play();
        songInfos = audioFiles[audioFileToPlay].id.split("-");

        songname.textContent = "Titre : " + songInfos[1];
        artist_name.textContent = "Artiste : " + songInfos[0];
    }

</script>